# 開発ノート: dev_5 予算フォームの数値入力 UX 改善

issue_5 で指摘されたスマホ入力の UX 課題を解消するため、BudgetCalculator の数値項目を選択式に置き換える計画を整理する。

## 1. 背景
- 現状は `input[type="number"]` で来店人数/指名キャスト数/キャストドリンク数を入力しているが、スマホで 0 を消して別の数字にしようとするとキーボード操作が煩雑になる。
- 1 桁のスモールレンジ (0〜5) に限られているため、ドロップダウンやピッカー UI に落とし込む方が UX に優れる。

## 2. 対象項目と要件
| 項目 | 現仕様 | 変更後仕様 |
| --- | --- | --- |
| 来店人数 | 最低 1 / 数値入力 | 1〜5 の選択式 |
| 指名キャスト数 | 0 以上 / 数値入力 | 0〜5 の選択式 |
| キャストドリンク数 (1人あたり) | 0 以上 / 数値入力 | 0〜5 の選択式 |

- すべて整数で足りるため、セレクト or ボタンピッカーで UI 統一。
- 来店人数だけは 0 を許容しない点に注意 (最小 1)。

## 3. UI/実装方針
1. **コンポーネント化**: ラベル付きの選択 UI コンポーネント (例: `NumberSelector`) を作成し、各項目で使い回す。
2. **入力手段**:
   - モバイルを意識して `<select>` もしくはボタン群のいずれかを選択。
   - 実装コストとアクセシビリティを考慮し、まずは `<select>` を流用。デザイン上の要件があればボタンピッカーに拡張。
3. **初期値/制約**:
   - 来店人数は 1 が初期値。その他は 0。
   - 変更イベントは `BudgetCalculator` の state 更新ロジックに統合。
4. **バリデーション**:
   - 既存の `ensureNumber`、`Math.max` のような入力チェックは select 化で不要。代わりにセレクトの options で制限。


## 4. 変更範囲
- `src/components/BudgetCalculator.tsx`
  - 数値入力部分をセレクトへ置換。
  - state の更新関数を `handleSelectChange(field)` に差し替え。
  - デフォルト値/`BudgetParams` の型は現行通り。
- テストは Lint/TS チェックのみで OK (UI 変更のため手動確認推奨)。

## 5. タスク
1. `options` ヘルパーを定義 (`[1,2,3,4,5]`, `[0,...,5]`)。
2. `SelectField` コンポーネントを BudgetCalculator 内に追加 (既存 label とレイアウトを再利用)。
3. 各項目の入力 UI を select に差し替え。
4. スタイル (border/color) を number input と同じ Tailwind クラスで整える。
5. スマホ実機/エミュレータで操作性確認。

## 6. リスクと対策
- **選択肢の不足**: 要件が 5 までの想定だが、将来的に範囲が変わる可能性がある。`MAX_GUEST_COUNT` など定数化しておけば差し替えが容易。
- **UI 変更によるレイアウト崩れ**: `select` の幅/高さが入力と異なる場合があるので CSS を共通化。
- **アクセシビリティ**: 小さなボタン群だとタップしづらいので、セレクト First とする。

## 7. 受け入れ基準
- スマホ (iOS/Android) で各項目をタップすると数値を選べる。
- 0 を消す手間がなく、1〜5 (または 0〜5) のみ選択可能。
- 予算計算結果 (`guestCount`, `nominationCount`, `castDrinkCountPerGuest`) がセレクト値に連動して更新される。

これにより、最小限の UI 変更でスマホ入力 UX を改善できる。将来的にステッパーやピッカー UI へ発展させる余地を残しつつ、現時点での課題を解消する。
